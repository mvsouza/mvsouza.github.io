<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; mvsouza</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="/index.html">
<meta property="og:site_name" content="mvsouza">

<meta name="google-site-verification" content="">
<meta name="msvalidate.01" content="32312321312213">


<link rel="canonical" href="/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="mvsouza Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">Translations</a>
			<ul class="dl-submenu">
			
			
			
			
				
			
				<li>
			    	<li><a href="/inicio/" class="pt">pt</a></li>
			    
			

			</ul>
		</li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Matheus Valiente Souza photo" class="author-photo">
					<h4>Matheus Valiente Souza</h4>
					<p>Programmer.</p>
				</li>
				<li>
					<a href="mailto:mvs@mvsouza.com"><i class="fa fa-envelope"></i> Email</a>
				</li>
				
				<li>
					<a href="http://facebook.com/matheus.valientesouza"><i class="fa fa-facebook"></i> Facebook</a>
				</li>
				
				<li>
					<a href="http://linkedin.com/in/mvsouza"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/mvsouza"><i class="fa fa-github"></i> GitHub</a>
				</li>
				
				<li>
					<a href="http://stackexchange.com/users/449767"><i class="fa fa-stack-exchange"></i> Stackexchange</a>
				</li>
				<li>
					<a href="http://instagram.com/matheusvalientesouza"><i class="fa fa-instagram"></i> Instagram</a>
				</li>
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Post</a></li>
				<li><a href="/Tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div id="particles-js" class="entry-header">
  <div class="entry-image">
  </div>
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>mvsouza</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div>

<div id="main" role="main">
  

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2019-02-05T00:00:00+00:00"><a href="/event-sourcing-en/">February 05, 2019</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Matheus Valiente Souza">Matheus Valiente Souza</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="/event-sourcing-en/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~3 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/event-sourcing-en/" rel="bookmark" title="Event Sourcing" itemprop="url">Event Sourcing</a></h1>
    
  </header>
  <div class="entry-content">
    <p>I know that you might be tired of reading/hearing about it, and there is enough material on it out there. Still, there are many inconsistencies and misconceptions that might make you fuzzy. So I’ll show you what I see as being the basics and give you good references. If it makes you curious enough, soon I’ll be posting some samples.</p>

<h3 id="concept">Concept</h3>

<p>Erick Evans, on his book about DDD, raises an interesting point about the object’s life cycle and reconstituting stored objects when writing about factories:</p>

<blockquote>
  <p>At some point, most objects get stored in databases or transmitted through a network, and few current database technologies retain the object character of their contents. Most transmission methods <strong>flatten an object</strong> into an even more limited presentation. Therefore, retrieval requires a potentially complex process of reassembling the parts into a live object.<br />
– <cite>Eric Evans</cite></p>
</blockquote>

<p>He is explaining the importance of factories (as ORMs) to recreate objects as they were before being persisted to the database. He argues that there is a great responsibility for these objects when they reconstitute the previous state of a disposed object as they once were.</p>

<p>Although his idea of object’s life cycle could be considered already <strong>flatten</strong> on an event-driven perspective. So we could say <em>Most structural data models <strong>flatten objects</strong> into an even more limited presentation.</em> Due to understanding it better, we should discuss what it means. Consider reading Martin Fowlers<a href="https://martinfowler.com/articles/201701-event-driven.html">article</a> about the subject, where he explains his view about event source (ES):</p>

<blockquote>
  <p>The core idea of event sourcing is that whenever we make a change to the state of a system, we record that state change as an event, and we can confidently rebuild the system state by reprocessing the events at any time in the future. The event store becomes the principal source of truth, and the system state is purely derived from it. For programmers, the best example of this is a version control system. The log of all the commits is the event store and the working copy of the source tree is the system state.<br />
– <cite>Martin Fowler</cite></p>
</blockquote>

<p>In addition to Erick`s view, ES expands the immutability, only covered by Value Objects on DDD, to whole application state, like a shadow. We only <strong>append</strong> facts to the repository. In spite of changing and deleting objects, we create new events that, when applied, remove or change them from the current state.</p>

<h3 id="aplication">Aplication</h3>

<p>As good as it sounds, of course, you might not be already pumped to use it. I’ve just described what it is, not why. Why should you care? After all, if you wanna fix something without nails, a hammer is useless.</p>

<p>I’ve questioned myself that years ago. To answer I had to associate with other concepts first, like distributed computing, DDD, functional programming. Now, I have a view of my own, and I hope to help to build yours.</p>

<p>One of its characteristics is traceability/auditability. Natively, you got the ability to trace all domain changes and easily understand how the application is behaving. Even more, you could easily add user information and audite user changes.</p>

<p>Another important feature it provides is an easy reconciliation. So, when things go south between distributed systems, one can simply ask for what happened to others on a period then process all lost messages.</p>

<p>For these reasons, ES should solve many problems like conflict management and desynchronization on microservice applications that shares business flows and IoT/embedded systems that might work off-line.</p>

<p>There is plenty of real-world applications that would leverage this pattern, like:</p>

<ul>
  <li>Shipment tracker</li>
  <li>IoT systems in general</li>
  <li>Version control systems</li>
  <li>Banking transactions</li>
</ul>

<h3 id="conclusion">Conclusion</h3>

<p>To conclude the pros/cons, I will let Greg Young, who has made the concept popular, anwser that:</p>

<blockquote>
  <h4 id="pros"><strong>Pros</strong></h4>
  <p>Single Event Centric Model<br />
Simplified/Better Testing<br />
Conflict Management</p>

  <h4 id="cons"><strong>Cons</strong></h4>
  <p>Harder to sell to an organization<br />
Less known tools/technologies (though you can implement the Event Store in a RDBMS which kind of mitigates this)<br />
Very difficult to migrate a legacy app to<br />
–<cite><a href="http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/">Greg Young</a></cite></p>
</blockquote>

<h3 id="next-steps">Next steps</h3>

<p>I’ve been working with C# for a while now, so I will be posting some sample soon. But keep in mind that, as Vaught Venom wrote in his book <em>Implementing Domain Driven Design</em>, “ES is inherently functional in nature”, and its use on this paradigm would “potentially lead to more concise code that performs optimally”.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-12-05T00:00:00+00:00"><a href="/resolving-a-geo-location-to-a-city/">December 05, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Matheus Valiente Souza">Matheus Valiente Souza</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="/resolving-a-geo-location-to-a-city/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/resolving-a-geo-location-to-a-city/" rel="bookmark" title="Resolving a geo-location to a city" itemprop="url">Resolving a geo-location to a city</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Last week I was looking a way to find out the city from a latitude and longitude.
So here is what I learned.</p>

<h2 id="circumstances">Circumstances</h2>

<p>Actualy I and my team triped over this issue, because we are using the venues from the Foursquare API, that doesn’t always provide this informations, and when it does may be roungh.
So I strugle in some insatisfary solutions, between those I’ve tested Geonames Onpenstreemap and  Mapbpx API.
Finaly it led me to the beta service of Opencage, that uses the Towfishes to resolve the geocode reverse.</p>

<p>I’m currently using the Mapbox map to display the Foursquare venues, and the Geoname api to auto complete cities names on a search form.
It shouldn’t be hard at all, if it isn’t the fact we can’t use the Google api, because its license agreement obligate us to use from its own map.</p>

<h2 id="developing-acess-to-the-apis">Developing acess to the APIs</h2>

<p>The ideal scenario would use the Geoname API, because it’s free service, we are already using, so the city aliases would be similar to the searched venues input.</p>

<p>As I’ve already experienced previously, it results don’t follow a strict pattern, but tried it again to be sure.</p>

<p>As an alternative I’ve chosen to test the Mapbox api, that we already have an account, and the Openstreetmap, that doesn’t require any account.</p>

<p>In oder to develop test the APIs, I’ve coded an Angular Webapp  using a template from Yeoman.</p>

<h2 id="implementation">Implementation</h2>

<p>Then I develop a service that would use all those APIs.</p>

<p>To configure the service I’ve added constant to the angular module as follow.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">reverseGeocodeModule</span><span class="p">.</span><span class="nx">constant</span><span class="p">(</span><span class="s1">&#39;GeoAPIConstants&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">mapBoxId</span><span class="o">:</span> <span class="s1">&#39;xxxxxx&#39;</span><span class="p">,</span>
    <span class="nx">geonameId</span><span class="o">:</span> <span class="s1">&#39;xxxxxx&#39;</span><span class="p">,</span>
    <span class="nx">openCage</span><span class="o">:</span> <span class="s1">&#39;xxxxxx&#39;</span>
  <span class="p">});</span></code></pre></div>

<p>When I developed the services, I used these constants to identify the environment configurations, so I don’t need to peek on every file to change my access accounts.</p>

<p>Let me show the services.</p>

<h3 id="mapbox">Mapbox</h3>

<p>The Mapbox WEB API has <a href="http://api.tiles.mapbox.com/v3/examples.map-zr0njcqy/geocode/-73.989,40.733.json">this reverse geocode call</a>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">reverseGeocodeModule</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">&#39;MapboxService&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="s1">&#39;$http&#39;</span><span class="p">,</span><span class="s1">&#39;GeoAPIConstants&#39;</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span><span class="nx">GeoAPIConstants</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">urls</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">urls</span><span class="p">.</span><span class="nx">geocode</span> <span class="o">=</span> <span class="s2">&quot;http://api.tiles.mapbox.com/v3/{0}/geocode/{1},{2}.json&quot;</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">FindCityReverseGeocode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">lng</span><span class="p">,</span> <span class="nx">lat</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">urls</span><span class="p">.</span><span class="nx">geocode</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">GeoAPIConstants</span><span class="p">.</span><span class="nx">mapBoxId</span><span class="p">,</span><span class="nx">lng</span><span class="p">,</span><span class="nx">lat</span><span class="p">));</span>
        <span class="k">return</span> <span class="nx">q</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">){</span>
                    <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">extractCityFromGeocodeJSONResult</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">};</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">extractCityFromGeocodeJSONResult</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">isResultEmpty</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">searchInMatrixForCity</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">isResultEmpty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
      <span class="k">return</span> <span class="o">!</span><span class="nx">result</span><span class="p">.</span><span class="nx">results</span> <span class="o">||</span> <span class="nx">result</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">searchInMatrixForCity</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">){</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">].</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;city&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">];</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}]);</span></code></pre></div>

<h3 id="openstreetmap">Openstreetmap</h3>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">reverseGeocodeModule</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">&#39;OpenstreetmapService&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="s1">&#39;$http&#39;</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">urls</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">urls</span><span class="p">.</span><span class="nx">geocode</span> <span class="o">=</span> <span class="s2">&quot;http://nominatim.openstreetmap.org/reverse?format=json&amp;lat={1}&amp;lon={0}&quot;</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">FindCityReverseGeocode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">lng</span><span class="p">,</span> <span class="nx">lat</span><span class="p">){</span>
            <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">urls</span><span class="p">.</span><span class="nx">geocode</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">lng</span><span class="p">,</span><span class="nx">lat</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">}]);</span></code></pre></div>

<h3 id="geonames">Geonames</h3>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">reverseGeocodeModule</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">&#39;GeonamesService&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="s1">&#39;$http&#39;</span><span class="p">,</span><span class="s1">&#39;GeoAPIConstants&#39;</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span><span class="nx">GeoAPIConstants</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">urls</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">urls</span><span class="p">.</span><span class="nx">reverseGeocode</span> <span class="o">=</span> <span class="s2">&quot;http://ws.geonames.org/findNearbyPlaceNameJSON?lat={1}&amp;lng={0}&amp;style=full&amp;username={2}&quot;</span><span class="p">;</span>

    <span class="nx">self</span><span class="p">.</span><span class="nx">FindCityReverseGeocode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">lng</span><span class="p">,</span> <span class="nx">lat</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">urls</span><span class="p">.</span><span class="nx">reverseGeocode</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">lng</span><span class="p">,</span><span class="nx">lat</span><span class="p">,</span><span class="nx">GeoAPIConstants</span><span class="p">.</span><span class="nx">geonameId</span><span class="p">));</span>
            <span class="k">return</span> <span class="nx">q</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
                <span class="kd">var</span> <span class="nx">listResults</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">geonames</span><span class="p">;</span>
                <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">listResults</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="o">&lt;=</span><span class="nx">self</span><span class="p">.</span><span class="nx">findFeatureClassIndexFor</span><span class="p">(</span><span class="nx">listResults</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span>
                      <span class="k">return</span> <span class="nx">listResults</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="p">}</span>
            <span class="p">});</span>
    <span class="p">};</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">findFeatureClassIndexFor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">geolocation</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">featureClassNameList</span> <span class="o">=</span> <span class="nx">geolocation</span><span class="p">.</span><span class="nx">fclName</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">featureClassNameList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;city&quot;</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}]);</span></code></pre></div>

<h2 id="solution-elected">Solution elected</h2>

<p>Opencage service</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">reverseGeocodeModule</span><span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">&#39;OpenCageService&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="s1">&#39;$http&#39;</span><span class="p">,</span><span class="s1">&#39;GeoAPIConstants&#39;</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span><span class="nx">GeoAPIConstants</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">urls</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">urls</span><span class="p">.</span><span class="nx">geocode</span> <span class="o">=</span> <span class="s2">&quot;https://api.opencagedata.com/geocode/v1/json?q={1},{0}&amp;pretty=1&amp;key={2}&quot;</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">FindCityGeoCodeReverse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">lng</span><span class="p">,</span> <span class="nx">lat</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">lng</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>
        <span class="nx">lng</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="o">+</span><span class="nx">lng</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">lat</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>
        <span class="nx">lat</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="o">+</span><span class="nx">lat</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">urls</span><span class="p">.</span><span class="nx">geocode</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">lng</span><span class="p">,</span><span class="nx">lat</span><span class="p">,</span><span class="nx">GeoAPIConstants</span><span class="p">.</span><span class="nx">openCage</span><span class="p">));</span>
        <span class="k">return</span> <span class="nx">q</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">){</span>
                    <span class="k">return</span> <span class="nx">r</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">components</span><span class="p">;</span>
        <span class="p">});</span>
      <span class="p">};</span>
  <span class="p">}]);</span></code></pre></div>

<!---
but the analysis of the results were quite disapoiting

-->

<h2 id="next-experiments">Next experiments</h2>

<p>The chosen API is running in beta version, so considered it risky. 
In order to mitigate it, the next step would be try the Twofishes solution, which opencage uses, to evaluate it as an alternative.</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-11-08T00:00:00+00:00"><a href="/yeoman-jumpstart/">November 08, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Matheus Valiente Souza">Matheus Valiente Souza</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="/yeoman-jumpstart/#disqus_thread">Comment</a></span>
      
      <span class="entry-reading-time pull-right">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/yeoman-jumpstart/" rel="bookmark" title="Yeoman jumpstart" itemprop="url">Yeoman jumpstart</a></h1>
    
  </header>
  <div class="entry-content">
    <p>In this jump start I will show how to create a Angular directive using Yeoman.</p>

<p>But before the good part, let me briefly introduce to you Yeoman, or can’t handle yourself just skip to the <a href="#letsgetdowntoit">good part</a>.</p>

<h2 id="whata-hell">What’a hell?</h2>

<p style="text-align:center;">
	<img style="height:" src="/images/yeoman-005.ef68.png" />
</p>

<p>You may not know about the existence of Yeoman, as I didn’t. So in that case you are asking yourself “What the F$%# is this?”.
Yeoman is scaffolding tool that helps developers to start up their projects, especially the web kind. It generates boilerplate code, including bower and npm package references and task runner scripts like grunt and gulp.</p>

<h2 id="and-why-should-i-care-about-it">And? Why should I care about it?</h2>

<p>Actually, this is pretty neat, because you can easily set up a solution with a whole structure, without having to copy code from other projects or write the same jibber jabber.</p>

<p style="text-align:center;">
<img alt="Copy ain't funny" src="/images/Copying_test-331x285.jpg" />
</p>
<p>Therefore, it increases your productivity and, if use it the right way, software quality, by adding and configure tools that you would may leave behind, because they “delay” your “progress”.</p>

<p style="text-align:center;">
	<video style="width: 275px;" alt="Ain't got time for that" src="/images/aintgottimeforthat.webm" autoplay="autoplay" loop="loop"> 
   Your browser does not implement html5 video. 
	</video>
</p>

<p>It has already set of generators, that cover a good variety of solutions. Each one requires some usual tasks for its purpose, like automated tests, build, watch (livereload), and in common projects dependencies, as AngularJS, Bootstrap.</p>

<p>In order to cover these needs, it may generate bower and npm package references and Grunt or Gult files for running tasks.</p>

<!-- more -->

<p><span name="letsgetdowntoit"></span></p>

<h2 id="letsgetdowntoit">#LetsGetDownToIt</h2>

<p>We need some stuff fist:</p>

<ul>
  <li>Install <a href="https://www.npmjs.org/">NPM</a>, <a href="http://nodejs.org/">nodejs</a> package manager</li>
  <li>And them Yeoman itself, running the following command:</li>
</ul>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">npm install -g yo</code></pre></div>

<p alt="Ain't got time for that" style="text-align:center;">
	<video style="width: 275px;" src="/images/lonely_island_michael_bolton_jack_sparrow_back_to_.webm" autoplay="autoplay" loop="loop"> 
   Your browser does not implement html5 video. 
	</video>
</p>

<p>Now we are good to go! We need to download the angular directives generator for Yeoman.</p>

<p>You can find generators by searching in npm by packages with the prefix “generator”, like that:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">npm search generator WhaterverYouLike</code></pre></div>

<p>In this case we will need the angular directive, so we search like this:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">npm search generator directive</code></pre></div>

<p>With the package name in hand we install it.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">npm install generator-angular-directive -g</code></pre></div>

<p>The npm packages with “generator-“ prefix stands for yo templates. To run the recently added generator, we just need loose the prefix and pass it as argument to Yeomann. Before this ensure that you are in the project folder.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir ng-yomanDirective
<span class="nb">cd </span>ng-yomanDirective
yo angular-directive</code></pre></div>

<p>Now that the magic happens! The Yeoman will ask some setting to generate in a more convenient way the project.</p>

<p>This template will ask you the name you wish to give for your new directive and your github name.</p>

<p>And them It will create a solution with:
* A configuration to build, run test and run server for live demo;
* Automated test configuration with karma and jasmine;
* Travis configuration for continuous integration.</p>

<p>These are the things you need to just start developing.</p>

<p>With the solution set run the following lines to install all dependencies:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">npm install -g gulp
npm install -g bower
npm install
bower install</code></pre></div>

<p>For run the live reload demo run:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">gulp serve</code></pre></div>

<p>And to develop using TDD, looking forward to maintain your bar green, run:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">gulp <span class="nb">test</span></code></pre></div>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    Previous
  
  <ul class="inline-list">
    <li>
      
        <span class="current-page">1</span>
      
    </li>
    
  </ul>
  
    Next
  
</div><!-- /.pagination -->
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2019 Matheus Valiente Souza. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


<script src="/assets/js/vendor/particles.min.js"></script>
<script>
	particlesJS('particles-js', {
    particles: {
        color: '#fff',
        shape: 'circle', // "circle", "edge" or "triangle"
        opacity: 0.5,
        size: 2,
        size_random: true,
        nb: 70,
        line_linked: {
            enable_auto: true,
            distance: 250,
            color: '#fff',
            opacity: 0.5,
            condensed_mode: {
                enable: true,
                rotateX: 600,
                rotateY: 600
            }
        },
        anim: {
            enable: true,
            speed: 2
        }
    },
    interactivity: {
        enable: true,
        mouse: {
            distance: 200
        },
        mode: 'grab'
    },
    /* Retina Display Support */
    retina_detect: false
});
</script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

          

</body>
</html>